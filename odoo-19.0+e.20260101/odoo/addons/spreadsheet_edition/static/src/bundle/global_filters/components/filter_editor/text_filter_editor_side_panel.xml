<?xml version="1.0" encoding="utf-8"?>
<templates>
    <div t-name="spreadsheet_edition.TextFilterEditorSidePanel" class="o_spreadsheet_filter_editor_side_panel">
        <Section title.translate="Label">
            <TextInput
                placeholder="store.labelPlaceholder"
                class="'o_global_filter_label' + (store.missingLabelError ? ' o_field_invalid' : '')"
                value="store.filter.label"
                onChange.bind="setLabel"
                autofocus="true"
            />
        </Section>
        <t t-if="store.isValid">
            <Section title.translate="Filter value">
                <div class="o-section-subtitle">Default value</div>
                <TextFilterValue
                    value="store.filter.defaultValue?.strings"
                    options="store.textOptions"
                    onValueChanged.bind="updateTextDefaultValue"
                />
                <div class="o-section-subtitle mt-4">Possible values</div>
                <Checkbox
                    className="'restrict_to_range mb-1'"
                    label.translate="Restrict values to ranges"
                    onChange.bind="toggleRangeRestriction"
                    value="state.rangeRestriction"
                />
                <SelectionInput
                    t-if="state.rangeRestriction"
                    ranges="store.rangesForSelectionInput"
                    required="true"
                    onSelectionChanged.bind="onRangeChanged"
                    onSelectionConfirmed.bind="onRangeConfirmed"
                />
            </Section>
            <t t-if="store.shouldDisplayFieldMatching">
                <SidePanelCollapsible isInitiallyCollapsed="!store.isNew" title.translate="Field matching">
                    <t t-set-slot="content">
                        <Section class="'pt-0'">
                            <FilterEditorFieldMatching
                                fieldMatchings="store.fieldsMatching"
                                selectField.bind="store.updateFieldMatching"
                                filterModelFieldSelectorField="store.filterModelFieldSelectorField"
                            />
                        </Section>
                    </t>
                </SidePanelCollapsible>
            </t>
        </t>
        <Section t-else="1">
            <ValidationMessages messages="[invalidModel]" msgType="'error'"/>
        </Section>
        <GlobalFilterFooter t-props="footerProps"/>
    </div>
</templates>
