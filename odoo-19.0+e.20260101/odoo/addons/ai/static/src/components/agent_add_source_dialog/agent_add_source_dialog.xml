<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="ai.AgentSourceCard">
        <div class="card shadow-sm cursor-pointer agent-source-card rounded-3" style="height: 180px;" t-on-click="props.onClick">
            <div class="card-body d-flex flex-column justify-content-center align-items-center text-center p-3">
                <div class="mb-2">
                    <i t-if="!props.image" t-att-class="'fa ' + props.icon + ' agent-source-icon'" t-att-title="props.title"></i>
                    <img t-if="props.image" t-att-src="props.image" t-att-alt="props.title" class="agent-source-image"/>
                </div>
                <h5 class="card-title mb-0 text-truncate w-100" t-esc="props.title" style="font-size: 0.9rem; line-height: 1.3;" t-att-title="props.title"/>
            </div>
        </div>
    </t>

    <t t-name="ai.AgentSourceURLDialog">
        <Dialog title.translate="Add Links" size="'md'">
            <div class="row gy-4 p-3">
                <textarea
                    t-model="state.urls"
                    class="form-control p-2"
                    rows="4"
                    placeholder="Paste your links, one per line"
                    t-ref="autofocus"
                    required="required"/>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onConfirm">Save</button>
                <button class="btn btn-secondary" t-on-click="props.close">Discard</button>
            </t>
        </Dialog>
    </t>

    <t t-name="ai.AgentSourceAddDialog">
        <Dialog title.translate="Add Sources" size="'lg'">
            <div style="min-height: 250px;" >
                <p class="mb-1">Add sources to your AI Agent to get answers based on specific content.</p>
                <input
                    type="file"
                    t-ref="fileInput"
                    multiple="true"
                    class="o_input_file d-none"
                    accept=".pdf,.docx,.doc,.pptx,.ppt,.xlsx,.xls,.odt,.ods,.txt,.csv"
                    t-on-change.stop="addAttachmentSources"
                />
                <div class="row gy-3 pt-2 justify-content-center" t-att-class="state.loading ? 'opacity-50 pe-none' : ''">
                    <div t-if="state.loading" class="d-flex justify-content-center w-100 position-absolute" style="bottom: 15px;">
                        <div class="text-muted">
                            <i class="fa fa-spinner fa-spin me-2"></i>
                            Adding sources...
                        </div>
                    </div>
                    <t t-foreach="cardsData" t-as="card" t-key="card['title']">
                        <div class="col-3">
                            <AgentSourceCard
                                icon="card['icon']"
                                image="card['image']"
                                title="card['title']"
                                onClick="card['onClick']"
                            />
                        </div>
                    </t>
                </div>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="props.close">Close</button>
            </t>
        </Dialog>
    </t>

</templates>
