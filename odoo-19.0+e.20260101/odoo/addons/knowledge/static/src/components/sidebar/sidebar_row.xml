<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="knowledge.SidebarRow">
        <li t-on-click.stop="onNameClick" t-attf-class="o_article position-relative cursor-pointer #{isReadonly ? 'readonly' : ''}" t-att-data-article-id="props.article.id">
            <div t-attf-class="o_article_handle d-flex rounded overflow-hidden #{isActive ? 'o_article_active' : ''}">
                <div t-if="hasChildren" class="o_article_icon position-relative" t-att-class="{'cursor-pointer': hasChildren }">
                    <div class="o_article_emoji p-1" t-out="props.article.icon or 'ðŸ“„'"/>
                    <a class="o_article_caret d-flex align-items-center justify-content-center text-muted" role="button" t-on-click.stop="onCaretClick">
                        <i t-attf-class="fa fa-fw #{props.unfolded ? 'fa-caret-down' : 'fa-caret-right'}"/>
                    </a>
                </div>
                <div t-else="" class="o_article_emoji p-1" t-out="props.article.icon or 'ðŸ“„'"/>
                <div class="d-flex flex-grow-1 min-w-0">
                    <a t-attf-class="o_article_name p-1 flex-grow-1 text-truncate #{isActive ? 'fw-bold text-900' : 'text-muted'}" role="button">
                        <t t-if="props.article.name" t-out="props.article.name"/>
                        <t t-else="">Untitled</t>
                    </a>
                    <a t-if="canCreateArticle and props.article.user_can_write" role="button"
                        class="o_article_create p-1 opacity-75 opacity-100-hover text-muted"
                        t-on-click.stop="createChild">
                        <i class="fa fa-fw fa-plus" title="Create an Article inside"/>
                    </a>
                </div>
            </div>
            <ul t-if="props.unfolded">
                <t t-foreach="props.article.child_ids" t-as="childId" t-key="childId">
                    <KnowledgeSidebarRow article="env.getArticle(childId)" unfolded="props.unfoldedIds.has(childId)" unfoldedIds="props.unfoldedIds" record="props.record"/>
                </t>
            </ul>
            <div t-elif="state.loading" class="p-1 text-center">
                <i class="fa fa-circle-o-notch fa-spin" title="loader" role="img"/>
            </div>
        </li>
    </t>
</templates>
